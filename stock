% Author Name: Olivia Repko
% Email: repkoo96@rowan.edu
% Course: MATLAB Programming - Fall 2024
% Assignment: Assignment 2
% Task: StockData
% Date: 10/18/24
% Read stock data from file
stock_prices = readmatrix('stock_data.txt');

% Step 1: Calculate statistics
average_price = mean(stock_prices);
highest_price = max(stock_prices);
lowest_price = min(stock_prices);

% Calculate the number of days the stock price increased
price_increases = sum(diff(stock_prices) > 0);

% Step 2: Display the results
fprintf('Average Closing Price: %.2f\n', average_price);
fprintf('Highest Closing Price: %.2f\n', highest_price);
fprintf('Lowest Closing Price: %.2f\n', lowest_price);
fprintf('Number of Days Stock Price Increased: %d\n', price_increases);

% Step 3: Create a line plot
figure;
hold on;
plot(stock_prices, 'b-', 'LineWidth', 1.5, 'DisplayName', 'Daily Closing Prices');
yline(average_price, 'g--', 'Average Price', 'LineWidth', 1.5, 'DisplayName', 'Average Price');
yline(highest_price, 'r--', 'Highest Price', 'LineWidth', 1.5, 'DisplayName', 'Highest Price');
yline(lowest_price, 'k--', 'Lowest Price', 'LineWidth', 1.5, 'DisplayName', 'Lowest Price');
hold off;

% Add labels, title, and legend
xlabel('Days');
ylabel('Closing Price');
title('Stock Price Analysis');
legend('show');
grid on;

% Step 4: Save the plot as an image file
saveas(gcf, 'stock_analysis.png');

% Step 5: Write summary to a new file
summary_file = fopen('stock_summary.txt', 'w');
fprintf(summary_file, 'Stock Price Analysis Summary:\n');
fprintf(summary_file, 'Average Closing Price: %.2f\n', average_price);
fprintf(summary_file, 'Highest Closing Price: %.2f\n', highest_price);
fprintf(summary_file, 'Lowest Closing Price: %.2f\n', lowest_price);
fprintf(summary_file, 'Number of Days Stock Price Increased: %d\n', price_increases);
fclose(summary_file);
